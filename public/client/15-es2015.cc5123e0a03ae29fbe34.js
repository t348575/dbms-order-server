(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{x5bZ:function(e,o,t){"use strict";t.r(o),t.d(o,"RegisterPageModule",(function(){return C}));var i=t("ofXK"),n=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),b=t("2g2N"),a=t("fXoL"),c=t("lGQG"),l=t("tk/3"),u=t("A1CT"),m=t("/oCc");const d=["datePicker"];function f(e,o){if(1&e&&(a.Kb(0,"ion-select-option",26),a.fc(1),a.Jb()),2&e){const e=o.$implicit;a.Xb("value",e.dial_code),a.xb(1),a.ic("",e.name,", ",e.dial_code,"")}}function g(e,o){if(1&e&&(a.Kb(0,"ion-select-option"),a.fc(1),a.Jb()),2&e){const e=o.$implicit;a.xb(1),a.gc(e.countryName)}}function p(e,o){if(1&e&&(a.Kb(0,"ion-select-option"),a.fc(1),a.Jb()),2&e){const e=o.$implicit;a.xb(1),a.gc(e.name)}}const h=function(){return{type:"num",mask:"999-999-9999"}},y=function(){return["/login"]},J=[{path:"",component:(()=>{class e{constructor(e,o,t,i,r){this.formBuilder=e,this.auth=o,this.http=t,this.cdr=i,this.utilityService=r,this.phoneCodes=[],this.countries=[],this.regions=[],this.form=e.group({email:["",[n.m.required,n.m.email]],name:["",n.m.required],dob:["",n.m.required],phone:["",n.m.required],password:["",n.m.required],rePassword:["",n.m.required],country:["",n.m.required],city:["",n.m.required],region:["",n.m.required],pinCode:["",n.m.required],address:["",n.m.required],code:["",n.m.required]},{validator:this.ConfirmedValidator("password","rePassword")}),this.utilityService.getCurrentCountryPhoneCode().subscribe(e=>{setTimeout(()=>{this.utilityService.getPhoneCodeList().subscribe(o=>{this.phoneCodes=o,this.form.get("code").setValue(e)})},100)}),this.utilityService.getCountryRegionList().subscribe(e=>{this.countries=e,this.utilityService.getCurrentCountry().subscribe(e=>{for(const o of this.countries)if(o.countryShortCode===e){this.form.get("country").setValue(o.countryName),this.setRegions(),setTimeout(()=>{const e=this.utilityService.getCurrentRegion();for(const t of o.regions)if(t.name===e){this.form.get("region").setValue(e);break}},100),this.utilityService.getCurrentCity().length>0&&this.form.get("city").setValue(this.utilityService.getCurrentCity());break}})})}setRegions(){const e=this.form.get("country").value;if(e.length>0)for(const o of this.countries)if(o.countryName===e){this.regions=o.regions;break}}ngAfterViewInit(){const e=new Date((new Date).setFullYear((new Date).getFullYear()-18));this.datePicker.value=`${e.getDate()}-${e.getMonth()}-${e.getFullYear()}`,this.cdr.detectChanges()}ConfirmedValidator(e,o){return t=>{const i=t.controls[o];i.errors&&!i.errors.confirmedValidator||i.setErrors(t.controls[e].value!==i.value?{confirmedValidator:!0}:null)}}register(){if(this.form.valid){const e=this.form.getRawValue();e.phone=e.code.replace("+","")+e.phone.replace(/-/gi,"");const o=new Date(e.dob);e.dob=`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`,this.auth.register(e.email,e.password,e.name,e.dob,e.phone,e.address,e.country,e.region,e.city,e.pinCode).subscribe(e=>{e.status?b.a.toast(e.message,2500,"primary"):b.a.toast(e.message,3e3,"danger")})}else this.form.get("rePassword").valid?b.a.toast("Form not filled out!",3e3,"danger"):b.a.toast("Passwords do not match!",3e3,"danger")}}return e.\u0275fac=function(o){return new(o||e)(a.Hb(n.b),a.Hb(c.a),a.Hb(l.b),a.Hb(a.h),a.Hb(u.a))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-register"]],viewQuery:function(e,o){var t;1&e&&a.jc(d,!0),2&e&&a.ac(t=a.Tb())&&(o.datePicker=t.first)},decls:70,vars:9,consts:[[1,"full-height","full-width"],["autocomplete","on",3,"formGroup","ngSubmit"],["size-sm","4","size","12","offset-sm","2","offset","0"],["position","floating"],["type","email","formControlName","email"],[1,"ion-no-padding"],["size","3"],["formControlName","code",3,"selectedText"],[3,"value",4,"ngFor","ngForOf"],["size","9"],["type","text","formControlName","phone",3,"brmasker"],["size-sm","4","size","12"],["type","text","formControlName","name"],["display-format","DD-MM-YYYY","formControlName","dob"],["datePicker",""],["type","password","formControlName","password"],["type","password","formControlName","rePassword"],["type","text","formControlName","address","rows","4"],["formControlName","country",3,"ionChange"],[4,"ngFor","ngForOf"],["formControlName","region"],["type","text","formControlName","city"],["type","number","max","9999999999","min","0","formControlName","pinCode"],[1,"center-middle"],["color","primary","fill","solid",1,"ion-float-end",3,"routerLink"],["color","danger","fill","solid","type","submit",1,"ion-float-end"],[3,"value"]],template:function(e,o){1&e&&(a.Kb(0,"ion-content"),a.Kb(1,"ion-grid",0),a.Kb(2,"form",1),a.Sb("ngSubmit",(function(){return o.register()})),a.Kb(3,"ion-row"),a.Kb(4,"ion-col",2),a.Kb(5,"ion-item"),a.Kb(6,"ion-label",3),a.fc(7,"Email"),a.Jb(),a.Ib(8,"ion-input",4),a.Jb(),a.Kb(9,"ion-grid",5),a.Kb(10,"ion-row"),a.Kb(11,"ion-col",6),a.Kb(12,"ion-item"),a.Kb(13,"ion-label",3),a.fc(14,"Code"),a.Jb(),a.Kb(15,"ion-select",7),a.ec(16,f,2,3,"ion-select-option",8),a.Jb(),a.Jb(),a.Jb(),a.Kb(17,"ion-col",9),a.Kb(18,"ion-item"),a.Kb(19,"ion-label",3),a.fc(20,"Phone"),a.Jb(),a.Ib(21,"ion-input",10),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(22,"ion-col",11),a.Kb(23,"ion-item"),a.Kb(24,"ion-label",3),a.fc(25,"Name"),a.Jb(),a.Ib(26,"ion-input",12),a.Jb(),a.Kb(27,"ion-item"),a.Kb(28,"ion-label",3),a.fc(29,"Date of birth"),a.Jb(),a.Ib(30,"ion-datetime",13,14),a.Jb(),a.Jb(),a.Jb(),a.Kb(32,"ion-row"),a.Kb(33,"ion-col",2),a.Kb(34,"ion-item"),a.Kb(35,"ion-label",3),a.fc(36,"Password"),a.Jb(),a.Ib(37,"ion-input",15),a.Jb(),a.Kb(38,"ion-item"),a.Kb(39,"ion-label",3),a.fc(40,"Repeat password"),a.Jb(),a.Ib(41,"ion-input",16),a.Jb(),a.Kb(42,"ion-item"),a.Kb(43,"ion-label",3),a.fc(44,"Address"),a.Jb(),a.Ib(45,"ion-textarea",17),a.Jb(),a.Jb(),a.Kb(46,"ion-col",11),a.Kb(47,"ion-item"),a.Kb(48,"ion-label",3),a.fc(49,"Country"),a.Jb(),a.Kb(50,"ion-select",18),a.Sb("ionChange",(function(){return o.setRegions()})),a.ec(51,g,2,1,"ion-select-option",19),a.Jb(),a.Jb(),a.Kb(52,"ion-item"),a.Kb(53,"ion-label",3),a.fc(54,"Region"),a.Jb(),a.Kb(55,"ion-select",20),a.ec(56,p,2,1,"ion-select-option",19),a.Jb(),a.Jb(),a.Kb(57,"ion-item"),a.Kb(58,"ion-label",3),a.fc(59,"City"),a.Jb(),a.Ib(60,"ion-input",21),a.Jb(),a.Kb(61,"ion-item"),a.Kb(62,"ion-label",3),a.fc(63,"PIN code"),a.Jb(),a.Ib(64,"ion-input",22),a.Jb(),a.Jb(),a.Jb(),a.Kb(65,"ion-row",23),a.Kb(66,"ion-button",24),a.fc(67,"Login"),a.Jb(),a.Kb(68,"ion-button",25),a.fc(69,"Sign Up"),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&e&&(a.xb(2),a.Xb("formGroup",o.form),a.xb(13),a.Xb("selectedText",o.form.get("code").value.split(",")[0]),a.xb(1),a.Xb("ngForOf",o.phoneCodes),a.xb(5),a.Xb("brmasker",a.Yb(7,h)),a.xb(30),a.Xb("ngForOf",o.countries),a.xb(5),a.Xb("ngForOf",o.regions),a.xb(10),a.Xb("routerLink",a.Yb(8,y)))},directives:[r.j,r.m,n.n,n.j,n.e,r.x,r.i,r.t,r.u,r.s,r.M,n.i,n.d,r.z,r.L,i.i,m.a,r.k,r.C,r.H,r.c,r.K,s.h,r.A],styles:[""]}),e})()}];let K=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(o){return new(o||e)},imports:[[s.i.forChild(J)],s.i]}),e})(),C=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(o){return new(o||e)},imports:[[i.b,n.f,n.l,r.F,K,m.b]]}),e})()}}]);